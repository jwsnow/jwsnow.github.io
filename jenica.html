<!doctype html>
<html>
<title>Identicon Aesthetic Measure</title>
<style>
table{
	display: inline-block;
	border-spacing: 0px;
	border: 1px solid gray;
	margin: 20px;
}
td.con{
	width:50px;
	height:50px;
	background: white;
	border: 1px solid gray;
}
body{
	background: black;
	text-align: center;
	color: white;
}
</style>
<script>
var ICON=[
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];
function toggle(r,c){
	ICON[r][c]=1-ICON[r][c];
	drawICON();
}
function randomICON(){
	var r,c;
	
	for (r=0;r<5;r++)
		for (c=0;c<5;c++)
			ICON[r][c]=Math.floor(2*Math.random());
	drawICON();		
}
function drawICON(){
	var r,c;
	for (r=0;r<5;r++)
		for (c=0;c<5;c++){
			if (ICON[r][c]==0)
				theTABLE.rows[r].cells[c].style.background='white';
			else 
				theTABLE.rows[r].cells[c].style.background='black';
		}
	findMeasures();	
}
function countBlack(){
	var r,c;
	var n=0;
	for (r=0;r<5;r++)
		for (c=0;c<5;c++)
			n+=ICON[r][c];
	return n;
}
function countCorners(){
	var r,c;
	var n=0,m;
	for (r=0;r<4;r++)
		for (c=0;c<4;c++){
			m=ICON[r][c]+ICON[r+1][c]+ICON[r][c+1]+ICON[r+1][c+1];
			if ((m==1) || (m==3))
				n++;
		}
	return(n)
}
function findVsym(){
	var r,c;
	var n=0;
	for (r=0;r<5;r++)
		for (c=0;c<2;c++)
			if ((ICON[r][c]==ICON[r][4-c]))
				n++;
	return(n/10);
}
function findEntropy(){
	var b=countBlack()/25;
	var w=1-b;
	var h;
	if ((b==0) || (w==0))
		h=0;
	else
		h=-(b*Math.log2(b)+w*Math.log2(w));
	return(h);
}
function findBlockE(){
	var C=[];
	var r,c;	
	var n=0,p;
	var i;
	for (i=0;i<16;i++)
		C[i]=0;
	for (r=0;r<4;r++)
		for (c=0;c<4;c++)
			C[ICON[r][c]+2*ICON[r][c+1]+4*ICON[r+1][c]+8*ICON[r+1][c+1]]++;
	for (i=0;i<16;i++)
	if (C[i]!=0){
		p=C[i]/16;
		n+=p*Math.log(p)/Math.log(16);
	}
	return(-n);
}
function findMeasures(){
	var b=countBlack();
	var w=25-b;
	var crat;
	if (b<w) crat=b/w;
	else crat=w/b;
	var corn=countCorners();
	var verticalsymmetry=findVsym();
	var e=findEntropy();
	var be=findBlockE();
	
	black.innerHTML=(b/25).toFixed(3);
	white.innerHTML=(w/25).toFixed(3);
	colorratio.innerHTML=(crat).toFixed(3);
	numcorners.innerHTML=(corn).toFixed(3);
	vsym.innerHTML=(verticalsymmetry).toFixed(3);
	entropy.innerHTML=(e).toFixed(3);
	blockentropy.innerHTML=(be).toFixed(3);
}
</script>
</head>
</head>
<body onload='drawICON();'>
<table id='theTABLE'>
<tr><td class='con' onclick='toggle(0,0);'></td class='con'><td class='con' onclick='toggle(0,1);'></td class='con'><td class='con' onclick='toggle(0,2);'></td class='con'><td class='con' onclick='toggle(0,3);'></td class='con'><td class='con' onclick='toggle(0,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(1,0);'></td class='con'><td class='con' onclick='toggle(1,1);'></td class='con'><td class='con' onclick='toggle(1,2);'></td class='con'><td class='con' onclick='toggle(1,3);'></td class='con'><td class='con' onclick='toggle(1,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(2,0);'></td class='con'><td class='con' onclick='toggle(2,1);'></td class='con'><td class='con' onclick='toggle(2,2);'></td class='con'><td class='con' onclick='toggle(2,3);'></td class='con'><td class='con' onclick='toggle(2,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(3,0);'></td class='con'><td class='con' onclick='toggle(3,1);'></td class='con'><td class='con' onclick='toggle(3,2);'></td class='con'><td class='con' onclick='toggle(3,3);'></td class='con'><td class='con' onclick='toggle(3,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(4,0);'></td class='con'><td class='con' onclick='toggle(4,1);'></td class='con'><td class='con' onclick='toggle(4,2);'></td class='con'><td class='con' onclick='toggle(4,3);'></td class='con'><td class='con' onclick='toggle(4,4);'></td class='con'></tr>
</table>
<br>
<button onclick='randomICON();'>randomize</button><br>
<table id='measures'>
<tr><td>Proportion White</td><td id='white'></td></tr>
<tr><td>Proportion Black</td><td id='black'></td></tr>
<tr><td>Color Balance</td><td id='colorratio'></td></tr>
<tr><td>Corners</td><td id='numcorners'></td></tr>
<tr><td>Vertical Symmetry</td><td id='vsym'></td></tr>
<tr><td>Shannon Entropy</td><td id='entropy'></td></tr>
<tr><td>Block Entropy</td><td id='blockentropy'></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
</table>
</body>
</html>