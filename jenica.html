<!doctype html>
<html>
<title>Identicon Aesthetic Measure</title>
<style>
table{
	display: inline-block;
	border-spacing: 0px;
	border: 1px solid gray;
	margin: 20px;
}
td.con{
	width:50px;
	height:50px;
	background: white;
	border: 1px solid gray;
}
body{
	background: black;
	text-align: center;
	color: white;
}
</style>
<script>
var ICON=[
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];
function toggle(r,c){
	ICON[r][c]=1-ICON[r][c];
	drawICON();
}
function randomICON(){
	var r,c;
	
	for (r=0;r<5;r++)
		for (c=0;c<5;c++)
			ICON[r][c]=Math.floor(2*Math.random());
	drawICON();		
}
function drawICON(){
	var r,c;
	for (r=0;r<5;r++)
		for (c=0;c<5;c++){
			if (ICON[r][c]==0)
				theTABLE.rows[r].cells[c].style.background='white';
			else 
				theTABLE.rows[r].cells[c].style.background='black';
		}
	findMeasures();	
}
function countBlack(ICON){ 
	var r,c;
	var n=0;
	for (r=0;r<5;r++)
		for (c=0;c<5;c++)
			n+=ICON[r][c];
	return n;
}
function countCorners(ICON){
	var r,c;
	var n=0,m;
	for (r=0;r<4;r++)
		for (c=0;c<4;c++){
			m=ICON[r][c]+ICON[r+1][c]+ICON[r][c+1]+ICON[r+1][c+1];
			if ((m==1) || (m==3))
				n++;
		}
	return(n)
}

function findEntropy(ICON){
	var b=countBlack(ICON)/25;
	var w=1-b;
	var h;
	if ((b==0) || (w==0))
		h=0;
	else
		h=-(b*Math.log2(b)+w*Math.log2(w));
	return(h);
}
function findBlockE(ICON){
	var C=[];
	var r,c;	
	var n=0,p;
	var i;
	for (i=0;i<16;i++)
		C[i]=0;
	for (r=0;r<4;r++)
		for (c=0;c<4;c++)
			C[ICON[r][c]+2*ICON[r][c+1]+4*ICON[r+1][c]+8*ICON[r+1][c+1]]++;
	for (i=0;i<16;i++)
	if (C[i]!=0){
		p=C[i]/16;
		n+=p*Math.log(p)/Math.log(16);
	}
	return(-n);
}function vsymm(ICON){
	var r,c;
	var n=0;
	for (r=0;r<5;r++)
		for (c=0;c<2;c++)
			if ((ICON[r][c]==ICON[r][4-c]))
				n++;
	return(n/10);
}
function equilibrium(ICON){ 
	var b=countBlack(ICON);
	var w=25-b;
	var crat;
	if (b<w)  return(b/w);
	else return(w/b);
}
function rotsym(ICON){
	var x,y,r=0;
	for (x=0;x<5;x++)
		for (y=0;y<5;y++)
			r+=Math.abs(ICON[x][y]-ICON[4-x][4-y]);
	return(1-r/25);		
}
function rot90sym(ICON){
	var x,y,r=0;
	for (x=0;x<5;x++)
		for (y=0;y<5;y++)
			r+=Math.abs(ICON[x][y]-ICON[4-y][x]);
	return(1-r/25);		
}
function diagsym(ICON){
	var x,y,r=0;
	for (x=0;x<5;x++)
		for (y=0;y<5;y++)
			r+=Math.abs(ICON[x][y]-ICON[y][x]);
	return(1-r/25);		
}
function odiagsym(ICON){
	var x,y,r=0;
	for (x=0;x<5;x++)
		for (y=0;y<5;y++)
			r+=Math.abs(ICON[x][y]-ICON[4-y][4-x]);
	return(1-r/25);		
}
function rot90sym(ICON){
	var x,y,r=0;
	for (x=0;x<5;x++)
		for (y=0;y<5;y++)
			r+=Math.abs(ICON[x][y]-ICON[4-y][x]);
	return(1-r/25);		
}
function findMeasures(){

	var crat=equilibrium(ICON);
	var verticalsymmetry=vsymm(ICON);
	var be=findBlockE(ICON);
	
	colorratio.innerHTML=(crat).toFixed(3);
	vsym.innerHTML=(verticalsymmetry).toFixed(3);
	blockentropy.innerHTML=(be).toFixed(3);
	rot180.innerHTML=(rotsym(ICON)).toFixed(3);
	rot90.innerHTML=(rot90sym(ICON)).toFixed(3);
	diag.innerHTML=(diagsym(ICON)).toFixed(3);
	odiag.innerHTML=(odiagsym(ICON)).toFixed(3);
}
</script>
</head>
</head>
<body onload='drawICON();'>
<table id='theTABLE'>
<tr><td class='con' onclick='toggle(0,0);'></td class='con'><td class='con' onclick='toggle(0,1);'></td class='con'><td class='con' onclick='toggle(0,2);'></td class='con'><td class='con' onclick='toggle(0,3);'></td class='con'><td class='con' onclick='toggle(0,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(1,0);'></td class='con'><td class='con' onclick='toggle(1,1);'></td class='con'><td class='con' onclick='toggle(1,2);'></td class='con'><td class='con' onclick='toggle(1,3);'></td class='con'><td class='con' onclick='toggle(1,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(2,0);'></td class='con'><td class='con' onclick='toggle(2,1);'></td class='con'><td class='con' onclick='toggle(2,2);'></td class='con'><td class='con' onclick='toggle(2,3);'></td class='con'><td class='con' onclick='toggle(2,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(3,0);'></td class='con'><td class='con' onclick='toggle(3,1);'></td class='con'><td class='con' onclick='toggle(3,2);'></td class='con'><td class='con' onclick='toggle(3,3);'></td class='con'><td class='con' onclick='toggle(3,4);'></td class='con'></tr>
<tr><td class='con' onclick='toggle(4,0);'></td class='con'><td class='con' onclick='toggle(4,1);'></td class='con'><td class='con' onclick='toggle(4,2);'></td class='con'><td class='con' onclick='toggle(4,3);'></td class='con'><td class='con' onclick='toggle(4,4);'></td class='con'></tr>
</table>
<br>
<button onclick='randomICON();'>randomize</button><br>
Jenica's Measures
<br>
<table id='measures'>
<tr><td>Vertical Symmetry</td><td id='vsym'></td></tr>
<tr><td>Diagonal Symmetry</td><td id='diag'></td></tr>
<tr><td>Off-Diagonal Symmetry</td><td id='odiag'></td></tr>
<tr><td>Equilibrium</td><td id='colorratio'></td></tr>
<tr><td>Rotational Symmetry 180</td><td id='rot180'></td></tr>
<tr><td>Rotational Symmetry 90</td><td id='rot90'></td></tr>
<tr><td>Complexity</td><td id='blockentropy'></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
</table>

</body>
</html>